<div class="autorenewable-bubbles">

  <div class="loader-placeholder" *ngIf="(productList | keyvalue).length === 0">
    <ion-spinner name="crescent"></ion-spinner>
  </div>


  <swiper-container navigation="false" pagination="true" #swiperEl
    slides-per-view="auto"
    centered-slides="true" 
    space-between="30"
    >
    <!--
    autoplay-delay="2500"  -->
    <swiper-slide *ngIf="os == 'android' || (os == 'ios' && environment.iosPromoCodeEnabled)">
      <div class="bubble">
        <div class="code-prompt">
          <div class="title">J'ai un code</div>
          <div class="subtitle">
            Utilisez un code pour bénéficier des réductions sur les abonnements.
          </div>
          <div class="controls" *ngIf="os == 'ios'">
            <app-ux-button fill="clear" expand="block" (click)="enterACode()" shape="round">Saisir un code</app-ux-button>
          </div>
          <div class="controls" *ngIf="os == 'android'">
            <app-ux-button fill="clear" expand="block" (click)="enterACode('subs')" shape="round">
              <div class='inner'>
                Saisir un code d'abonnement
              </div>
            </app-ux-button>
            <app-ux-button fill="clear" expand="block" (click)="enterACode('inapp')" shape="round">
              <div class='inner'>
                Saisir un code d'achat
              </div>
            </app-ux-button>
          </div>
        </div>
      </div>
    </swiper-slide>
    <swiper-slide>
      <div class="bubble">
        <app-storefront-item color="dark" [product]="productList['hoylt']"
          [disabled]="user && (user.renewable_id && !active_entitled_subscription)"
          (action)="clickSubscriptionOption('hoylt')"
          variant="swipeable"
        >
          <div slot="title">
            Pack Hoylt
          </div>
          <div slot="description">
            <div class="pack-content color-dark">
              <div class="feature-list">
                <div class="feature-item">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Programme sportif</div>
                    <div class="feature-subtitle">Accès complet aux entraînements</div>
                  </div>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Programme alimentaire</div>
                    <div class="feature-subtitle">Plans nutritionnels personnalisés</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div slot="helper" *ngIf="user && (user.renewable_id && !active_entitled_subscription)">
            Vous avez déjà un abonnement actif. Vous ne pouvez pas souscrire à un autre abonnement.
          </div>
        </app-storefront-item>
      </div>
    </swiper-slide>
    <swiper-slide>
      <div class="bubble">
        <app-storefront-item color="warning" [product]="productList['gursky']"
          [disabled]="user && (user.renewable_id && !active_entitled_subscription)"
          (action)="clickSubscriptionOption('gursky')"
          variant="swipeable"
        >
          <div slot="title">
            Pack Gursky
          </div>
          <div slot="description">
            <div class="pack-content color-warning">
              <div class="feature-list">
                <div class="feature-item">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Programme sportif</div>
                    <div class="feature-subtitle">Accès complet aux entraînements</div>
                  </div>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Programme alimentaire</div>
                    <div class="feature-subtitle">Plans nutritionnels personnalisés</div>
                  </div>
                </div>
                <div class="feature-item feature-highlight">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Suivi nutritionniste</div>
                    <div class="feature-subtitle">Accompagnement expert</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div slot="helper" *ngIf="user && (user.renewable_id && !active_entitled_subscription)">
            Vous avez déjà un abonnement actif. Vous ne pouvez pas souscrire à un autre abonnement.
          </div>
        </app-storefront-item>
      </div>
    </swiper-slide>
    <swiper-slide>
      <div class="bubble">
        <app-storefront-item color="danger" [product]="productList['smiley']"
          [disabled]="user && (user.renewable_id && !active_entitled_subscription)"
          (action)="(clickSubscriptionOption('smiley'))"
          variant="swipeable"
        >
          <div slot="title">
            Pack Smiley
          </div>
          <div slot="description">
            <div class="pack-content color-danger">
              <div class="feature-list">
                <div class="feature-item">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Programme sportif</div>
                    <div class="feature-subtitle">Accès complet aux entraînements</div>
                  </div>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Programme alimentaire</div>
                    <div class="feature-subtitle">Plans nutritionnels personnalisés</div>
                  </div>
                </div>
                <div class="feature-item feature-highlight">
                  <div class="feature-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                    </svg>
                  </div>
                  <div class="feature-text">
                    <div class="feature-title">Suivi coach</div>
                    <div class="feature-subtitle">Accompagnement personnalisé</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div slot="helper" *ngIf="user && (user.renewable_id && !active_entitled_subscription)">
            Vous avez déjà un abonnement actif. Vous ne pouvez pas souscrire à un autre abonnement.
          </div>
        </app-storefront-item>
      </div>
    </swiper-slide>
    <swiper-slide>
      <div class="bubble">
        <app-storefront-item
          color="primary"
          [product]="productList['alonzo']"
          [disabled]="user && (user.renewable_id && !active_entitled_subscription)"
          (action)="clickSubscriptionOption('alonzo')"
          variant="swipeable"
        >
          <div slot="title">
              Pack alonzo
          </div>
          <div slot="description">
              <div class="pack-content color-primary">
                <div class="feature-list">
                  <div class="feature-item">
                    <div class="feature-icon">
                      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                      </svg>
                    </div>
                    <div class="feature-text">
                      <div class="feature-title">Programme sportif</div>
                      <div class="feature-subtitle">Accès complet aux entraînements</div>
                    </div>
                  </div>
                  <div class="feature-item">
                    <div class="feature-icon">
                      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                      </svg>
                    </div>
                    <div class="feature-text">
                      <div class="feature-title">Programme alimentaire</div>
                      <div class="feature-subtitle">Plans nutritionnels personnalisés</div>
                    </div>
                  </div>
                  <div class="feature-item feature-highlight">
                    <div class="feature-icon">
                      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                      </svg>
                    </div>
                    <div class="feature-text">
                      <div class="feature-title">Suivi coach</div>
                      <div class="feature-subtitle">Accompagnement personnalisé</div>
                    </div>
                  </div>
                  <div class="feature-item feature-highlight">
                    <div class="feature-icon">
                      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                      </svg>
                    </div>
                    <div class="feature-text">
                      <div class="feature-title">Suivi nutritionniste</div>
                      <div class="feature-subtitle">Accompagnement expert</div>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          <div slot="helper" *ngIf="user && (user.renewable_id && !active_entitled_subscription)">
              Vous avez déjà un abonnement actif. Vous ne pouvez pas souscrire à un autre abonnement.
          </div>
        </app-storefront-item>
      </div>
    </swiper-slide>
  </swiper-container>

  <!-- swiper doesn't provide this real-time scroll detection -->
  <!--<p>
    {{ xPos() }}
  </p>-->
</div>