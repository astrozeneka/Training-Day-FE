
<ion-header>
  <ion-toolbar color="" id="menu-header" class='' *ngIf="user">
      <h3 id="menu-branding" class="display-1 ion-text-center">
          Training-day
      </h3>
      <br/>
    <div class="profile-container">
      <div class="profile-image">
        <ion-avatar>
            <!-- Default picture -->
            <img *ngIf="user?.profile_image?.permalink"
                 [src]="getStaticUrl(user?.profile_image?.permalink)" alt="Profile Picture">
          <img *ngIf="!user?.profile_image?.permalink" src="../../../assets/samples/profile-sample-1.jpg" alt="Profile Picture">
        </ion-avatar>
      </div>
      <div class="profile-name" *ngIf="user">
        <span>{{ user.firstname }} {{ user.lastname }}</span>
      </div>
    </div>
  </ion-toolbar>
    <ion-toolbar *ngIf="!user">
        <ion-title>Training-day</ion-title>
    </ion-toolbar>
</ion-header>
<!-- the below message doesn't work on web -->
<!-- {{ (themeService.isDarkModeEnabled)?'dark':'light' }} -->
<ion-list lines="none" [class]="(themeService.isDarkModeEnabled)?'dark':'light'">
    <ion-button (click)="menuNavigate('/welcome-menu')" expand="full" fill="clear">Menu</ion-button>
    <ion-button (click)="menuNavigate('/home')" expand="full" fill="clear">Astuces et conseils</ion-button>
    <ion-button (click)="menuNavigate('/app-timer')" expand="full" fill="clear">Timer</ion-button>
    <ion-button (click)="menuNavigate('/app-gps')" expand="full" fill="clear">Course</ion-button>
    <ion-button (click)="menuNavigate('/app-imc')" expand="full" fill="clear">Calcul IMC</ion-button>
    <ion-button (click)="menuNavigate('/app-calories')" expand="full" fill="clear">Calc. calories</ion-button>
    <ion-button (click)="menuNavigate('/app-weight-tracking')" expand="full" fill="clear">Suivi du poids</ion-button>

    <ion-button (click)="menuNavigate('/recipe-list')" expand="full" fill="clear">
      Les recettes
    </ion-button>
    <ion-button (click)="menuNavigate('/swipeable-store')" expand="full" fill="clear" *ngIf="user?.function === 'customer' || !user">
        Boutique
    </ion-button>

    <div *ngIf="!user">
      <ion-button (click)="menuNavigate('/chat-master-placeholder')" expand="full" fill="clear">
        Messagerie <!-- To be displayed even if the user is not connected yet -->
      </ion-button>
      <ion-button (click)="menuNavigate('/login')" expand="full" fill="clear">Se connecter</ion-button>
    </div>
    <div *ngIf="user?.function === 'customer' || user?.function === 'coach' || user?.function === 'nutritionist'">
        <h4>Espace personnel</h4>
        <ion-button (click)="menuNavigate('/profile')" expand="full" fill="clear">Mon profil</ion-button>
        <ion-button (click)="menuNavigate('/chat')" expand="full" fill="clear" id="chat-button-item" *ngIf="user.function == 'customer'">
            Mon Coach
            <ion-chip *ngIf="unreadMessages > 0" color="danger">
              {{ unreadMessages }}
            </ion-chip>
        </ion-button>
        <ion-button (click)="menuNavigate('/chat-master-v4')" expand="full" fill="clear" id="chat-button-item" *ngIf="user.function == 'coach' || user.function == 'nutritionist'">
            Messagerie
            <ion-chip *ngIf="unreadMessages > 0" color="danger">
              {{ unreadMessages }}
            </ion-chip>
        </ion-button>
    </div>
    <!-- Espace coaching -->
    <div *ngIf="user?.function === 'coach'">

      <h4>Administration</h4>
      <ion-button (click)="menuNavigate('/manage/files/view')" expand="full" fill="clear">
        Fichiers
      </ion-button>
      <ion-button (click)="menuNavigate('/manage/users/view')" expand="full" fill="clear">
        Utilisateurs
      </ion-button>
      <ion-button (click)="menuNavigate('/manage/payments/view')" expand="full" fill="clear">
        Paiements
      </ion-button>
        <ion-button (click)="menuNavigate('/manage-personal-trainer')" expand="full" fill="clear">Enregistrer une séance</ion-button>

        <ion-button (click)="menuNavigate('/video-upload')" expand="full" fill="clear">
          Uploader une vidéo
        </ion-button>
        <ion-button (click)="menuNavigate('/add-recipe')" expand="full" fill="clear">
          Ajouter une recette
        </ion-button>
        <ion-button (click)="menuNavigate('/recipe-list')" expand="full" fill="clear">
          Les recettes
        </ion-button>
        <ion-button (click)="menuNavigate('/staff-appointment')" expand="full" fill="clear">
          Gérer mes rendez-vous
        </ion-button>
    </div>

    <div *ngIf="user?.function === 'admin'">
        <h4>Espace Admin</h4>
        <ion-button (click)="menuNavigate('/profile')" expand="full" fill="clear">Mon profil</ion-button>
        <ion-button (click)="menuNavigate('/chat')" expand="full" fill="clear">
            Messagerie
            <ion-chip *ngIf="unreadMessages" color="danger">{{ chatService.unreadMessages$ | async }}</ion-chip>
        </ion-button>
        <ion-button (click)="menuNavigate('/video-upload')" expand="full" fill="clear">
            Uploader une vidéo
        </ion-button>
        <ion-button (click)="menuNavigate('/add-recipe')" expand="full" fill="clear">
          Ajouter une recette
        </ion-button>
        <ion-button (click)="menuNavigate('/recipe-list')" expand="full" fill="clear">
          Les recettes
        </ion-button>
    </div>

  <div *ngIf="user?.function === 'admin'">
  <h4>Administration</h4>

  <ion-button (click)="menuNavigate('/manage/')" expand="full" fill="clear">
    Tableau de bord
  </ion-button>
  <ion-button (click)="menuNavigate('/manage/files/view')" expand="full" fill="clear">
    Fichiers
  </ion-button>
  <!--
  <ion-button (click)="menuNavigate('/manage/agencies/view')" expand="full" fill="clear">
    Agences
  </ion-button>
  -->
  <!--
  <ion-button (click)="menuNavigate('/manage/dayoff/view')" expand="full" fill="clear">
    Jours fériés
  </ion-button>
  -->
  <ion-button (click)="menuNavigate('/manage/appointments/view')" expand="full" fill="clear">
    Rendez-vous
  </ion-button>
  <ion-button (click)="menuNavigate('/manage/users/view')" expand="full" fill="clear">
    Utilisateurs
  </ion-button>
  <ion-button (click)="menuNavigate('/manage/posts/view')" expand="full" fill="clear">
    Articles
  </ion-button>
  <ion-button (click)="menuNavigate('/manage/payments/view')" expand="full" fill="clear">
    Mes payments
  </ion-button>
  <ion-button (click)="menuNavigate('/manage/posts/view')" expand="full" fill="clear">
    Mes articles
  </ion-button>
  <ion-button (click)="menuNavigate('/pusher-test')" expand="full" fill="clear">
    Pusher test
  </ion-button>
  </div>

  <h4></h4>
  <div *ngIf="user">
    <ion-button (click)="contentService.logout()" expand="full" fill="clear" color="danger">Se déconnecter</ion-button>
  </div>

</ion-list>

<ion-footer>
    <p>© 2024 Training day. All Rights Reserved.</p>
</ion-footer>
