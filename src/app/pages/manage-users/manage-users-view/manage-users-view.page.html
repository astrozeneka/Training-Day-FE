<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Utilisateurs</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-searchbar [formControl]="searchControl"
                  animated="true"
                  placeholder="Rechercher"
                  (keydown.enter)="loadData()"></ion-searchbar>
  <app-pagination
    [pageSegments]="pageSegments"
    (onNavigate)="updatePage($event)"
  ></app-pagination>
  <div class="ion-text-center">
    <ion-spinner *ngIf="!entityList" class="ion-padding" style="padding-top: 20vh"></ion-spinner>
  </div>
  <div *ngIf="entityList" class="entity-list">
    <ion-card *ngFor="let entity of entityList">
      <ion-avatar>
        <img *ngIf="entity.profile_image?.base64" [src]="getSafeImageURL(entity.profile_image)" alt="Profile Picture"/>
        <img *ngIf="!entity.profile_image" src="../../../assets/samples/profile-default-01.png" alt="Default Profile Picture"/>
      </ion-avatar>
      <div>
        <ion-card-header>
          <ion-card-title>{{ entity.firstname }} {{ entity.lastname }}
            <ion-chip *ngIf="entity.role==='admin'" color="danger">Admin</ion-chip>
            <ion-chip *ngIf="entity.role==='coach'" color="secondary">Coach</ion-chip>
            <ion-chip *ngIf="entity.role==='customer'" color="medium">Client</ion-chip>
          </ion-card-title>
          <div>
            <ion-button fill="clear" (click)="showDetailsModal(entity)">DÃ©tails</ion-button>
          </div>
        </ion-card-header>
      </div>
    </ion-card>
  </div>
</ion-content>

<ion-fab slot="fixed" vertical="bottom" horizontal="end">
  <ion-fab-button (click)="showAddModal()">
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>
</ion-fab>
